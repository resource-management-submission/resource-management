# Code for resource management evaluation

## Prerequisites

 * Recent version of [maven](https://maven.apache.org/), and recent version of 
   [Java SDK](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

## Compilation

```bash
mvn package
```

The compiled `.jar` file with all dependencies can be found inside `./target`.

## Usage

### Generate trace summaries

 1. Follow instructions [here](https://github.com/google/cluster-data) to
    download Google traces
 2. Unpack `.csv` files in `task_events`.
 3. Run `create-summaries` command from repository dir to generate summaries, e.g.

    ```
     cat google-cloud-sdk/task_events/part-000**-of-00500.csv | \
         java -jar ./target/*with-dependencies.jar \
         --summaries 000_100.test create-summaries
    ```

### Calculate data

Basic parameters can be learnt by passing `--help` option: 

```
java -jar ./target/*with-dependencies.jar --help
```

Note, it is always required to pass `--summaries 000_100.test`

To generate data, run `plot` command. For example, to generate *Fig. 4(a)*, use: 

```
java -jar ./target/*with-dependencies.jar --summaries 000_100.test \
    --allocation-cost 5 --maintenance-cost 0.01 --num-machines 4000 \
    --time-slot-duration 100 --value-scale 10  --deadline-random \
    plot -x deadline-scale --range 100:1000:20 -y objective-percentage
```

For exponential plots add `:exp` to `--range`. For example, the data for *Fig. 5(d)* 
was generated by the following command:

```
java -jar ./target/*with-dependencies.jar --summaries 000_100.test \
    --allocation-cost 5 --maintenance-cost 0.01 --num-machines 4000 \
    --time-slot-duration 100 --deadline-cushions-scale 800  --deadline-random \
    plot -x value-scale --range 10:100:20:exp -y objective-percentage

```

For the information about valid arguments for `-x`, `-y`, and `--policy` , just
make a typo in a corresponding argument =).

**Note!** To speed up plot generation pass at the end `--num-threads n` option.
